# Reference

<!-- DO NOT EDIT: This document was generated by Puppet Strings -->

## Table of Contents

### Classes

* [`kubeinstall`](#kubeinstall): A short summary of the purpose of this class
* [`kubeinstall::calico::calicoctl`](#kubeinstallcalicocalicoctl): Installing calicoctl as a binary on a single host
* [`kubeinstall::calico::veth_mtu`](#kubeinstallcalicoveth_mtu): Configure Calico MTU
* [`kubeinstall::cluster`](#kubeinstallcluster): A short summary of the purpose of this defined type.
* [`kubeinstall::etcd::backup`](#kubeinstalletcdbackup): Backing up an etcd cluster
* [`kubeinstall::install`](#kubeinstallinstall): A short summary of the purpose of this class
* [`kubeinstall::install::calico`](#kubeinstallinstallcalico): Install Project Calico CNI service
* [`kubeinstall::install::controller`](#kubeinstallinstallcontroller): kubernetes installation on controller node
* [`kubeinstall::install::dashboard`](#kubeinstallinstalldashboard): Install Kubernetes dashboard
* [`kubeinstall::install::helm`](#kubeinstallinstallhelm): Helm client installation
* [`kubeinstall::install::node`](#kubeinstallinstallnode): A short summary of the purpose of this class
* [`kubeinstall::install::worker`](#kubeinstallinstallworker): Kubernetes installation on worker node
* [`kubeinstall::kubeadm::config`](#kubeinstallkubeadmconfig): A short summary of the purpose of this class
* [`kubeinstall::kubeadm::init_command`](#kubeinstallkubeadminit_command): A short summary of the purpose of this class
* [`kubeinstall::kubeadm::join_command`](#kubeinstallkubeadmjoin_command): Kubernetes kubeadm join command
* [`kubeinstall::kubeadm::join_config`](#kubeinstallkubeadmjoin_config): Kubernetes kubeadm join command configuration
* [`kubeinstall::params`](#kubeinstallparams): A short summary of the purpose of this class
* [`kubeinstall::profile::controller`](#kubeinstallprofilecontroller): Kubernetes conntroller setup
* [`kubeinstall::profile::kubernetes`](#kubeinstallprofilekubernetes): Base setup for any kubernetes node
* [`kubeinstall::profile::worker`](#kubeinstallprofileworker): A short summary of the purpose of this class
* [`kubeinstall::repos`](#kubeinstallrepos): A short summary of the purpose of this class
* [`kubeinstall::runtime::docker`](#kubeinstallruntimedocker): Docker container runtime setup
* [`kubeinstall::service`](#kubeinstallservice): A short summary of the purpose of this class
* [`kubeinstall::system`](#kubeinstallsystem): A short summary of the purpose of this class
* [`kubeinstall::system::bridged_traffic`](#kubeinstallsystembridged_traffic): Load netfilter bridge kernel module
* [`kubeinstall::system::firewall::noop`](#kubeinstallsystemfirewallnoop): Disable firewalld service
* [`kubeinstall::system::selinux::noop`](#kubeinstallsystemselinuxnoop): Set selinux in permissive mode
* [`kubeinstall::system::swap`](#kubeinstallsystemswap): Disable swap on the system
* [`kubeinstall::system::sysctl::net_bridge`](#kubeinstallsystemsysctlnet_bridge): Setup bridged traffic processing with iptables

### Defined types

* [`kubeinstall::token_discovery`](#kubeinstalltoken_discovery): Token discovery resource

### Resource types

* [`kubeadm_token`](#kubeadm_token): Bootstrap tokens are a simple bearer token that is meant to be used when creating new clusters or joining new nodes to an existing cluster

### Functions

* [`kubeinstall::discovery_hosts`](#kubeinstalldiscovery_hosts)

### Data types

* [`Kubeinstall::Address`](#kubeinstalladdress)
* [`Kubeinstall::CACertHash`](#kubeinstallcacerthash)
* [`Kubeinstall::Token`](#kubeinstalltoken)
* [`Kubeinstall::TokenTTL`](#kubeinstalltokenttl)
* [`Kubeinstall::Version`](#kubeinstallversion): https://kubernetes.io/docs/setup/release/version-skew-policy/

## Classes

### `kubeinstall`

A description of what this class does

#### Examples

##### 

```puppet
include kubeinstall
```

#### Parameters

The following parameters are available in the `kubeinstall` class.

##### `web_ui_dashboard`

Data type: `Boolean`

Whether to install Web UI on controller node or not

##### `kubernetes_version`

Data type: `Kubeinstall::Version`



##### `dockerd_version`

Data type: `String`



##### `containerd_version`

Data type: `String`



##### `manage_kernel_modules`

Data type: `Boolean`



##### `manage_sysctl_settings`

Data type: `Boolean`



##### `disable_swap`

Data type: `Boolean`



##### `disable_firewall`

Data type: `Boolean`



##### `disable_selinux`

Data type: `Boolean`



##### `calico_cni_version`

Data type: `String`



##### `join_control_plane`

Data type: `Boolean`



##### `join_token`

Data type: `Optional[Kubeinstall::Token]`



##### `join_ca_cert_hash`

Data type: `Optional[Kubeinstall::CACertHash]`



##### `join_apiserver_address`

Data type: `Optional[Kubeinstall::Address]`



##### `join_apiserver_port`

Data type: `Integer`



##### `control_plane_endpoint`

Data type: `Optional[Kubeinstall::Address]`



##### `docker_mtu`

Data type: `Optional[Integer]`



##### `calico_mtu`

Data type: `Optional[Integer]`



##### `cluster_name`

Data type: `String`



##### `install_calicoctl`

Data type: `Boolean`



##### `node_name`

Data type: `Stdlib::Fqdn`



Default value: `$facts['networking']['fqdn']`

##### `apiserver_advertise_address`

Data type: `String`



Default value: `$facts['networking']['ip']`

##### `apiserver_bind_port`

Data type: `Integer`



Default value: `$kubeinstall::params::apiserver_bind_port`

##### `cri_socket`

Data type: `String`



Default value: `$kubeinstall::params::cri_socket`

##### `service_dns_domain`

Data type: `Stdlib::Fqdn`



Default value: `$kubeinstall::params::service_dns_domain`

##### `service_cidr`

Data type: `Stdlib::IP::Address`



Default value: `$kubeinstall::params::service_cidr`

##### `dashboard_configuration`

Data type: `Variant[
    Stdlib::HTTPUrl,
    Stdlib::Unixpath
  ]`



Default value: `$kubeinstall::params::dashboard_configuration`

##### `calicoctl_version`

Data type: `String`



Default value: `$kubeinstall::params::calicoctl_version`

##### `helm_version`

Data type: `String`



Default value: `$kubeinstall::params::helm_version`

### `kubeinstall::calico::calicoctl`

Installing calicoctl as a binary on a single host
https://docs.projectcalico.org/getting-started/clis/calicoctl/install#installing-calicoctl-as-a-binary-on-a-single-host

#### Examples

##### 

```puppet
include kubeinstall::calico::calicoctl
```

#### Parameters

The following parameters are available in the `kubeinstall::calico::calicoctl` class.

##### `version`

Data type: `String`



Default value: `$kubeinstall::calicoctl_version`

### `kubeinstall::calico::veth_mtu`

Configure Calico MTU
see # https://docs.projectcalico.org/networking/mtu#determine-mtu-size

#### Examples

##### 

```puppet
include kubeinstall::calico::veth_mtu
```

#### Parameters

The following parameters are available in the `kubeinstall::calico::veth_mtu` class.

##### `mtu`

Data type: `Integer`



Default value: `$kubeinstall::calico_mtu`

### `kubeinstall::cluster`

A description of what this defined type does

#### Examples

##### 

```puppet
include kubeinstall::cluster
```

#### Parameters

The following parameters are available in the `kubeinstall::cluster` class.

##### `apiserver_address`

Data type: `Kubeinstall::Address`



Default value: `$kubeinstall::apiserver_advertise_address`

##### `apiserver_port`

Data type: `Integer`



Default value: `$kubeinstall::apiserver_bind_port`

##### `cluster_name`

Data type: `String`



Default value: `$kubeinstall::cluster_name`

##### `ca_cert_hash`

Data type: `Optional[Kubeinstall::CACertHash]`



Default value: `$facts['kubeadm_discovery_token_ca_cert_hash']`

### `kubeinstall::etcd::backup`

Backing up an etcd cluster

#### Examples

##### 

```puppet
include kubeinstall::etcd::backup
```

### `kubeinstall::install`

A description of what this class does

#### Examples

##### 

```puppet
include kubeinstall::install
```

#### Parameters

The following parameters are available in the `kubeinstall::install` class.

##### `kubernetes_version`

Data type: `Kubeinstall::Version`



Default value: `$kubeinstall::kubernetes_version`

### `kubeinstall::install::calico`

Install Project Calico CNI service

#### Examples

##### 

```puppet
include kubeinstall::install::calico
```

#### Parameters

The following parameters are available in the `kubeinstall::install::calico` class.

##### `version`

Data type: `String`



Default value: `$kubeinstall::calico_cni_version`

##### `node_name`

Data type: `Stdlib::Fqdn`



Default value: `$kubeinstall::node_name`

##### `mtu`

Data type: `Optional[Integer]`



Default value: `$kubeinstall::calico_mtu`

##### `calicoctl`

Data type: `Boolean`



Default value: `$kubeinstall::install_calicoctl`

### `kubeinstall::install::controller`

kubernetes installation on controller node

#### Examples

##### 

```puppet
include kubeinstall::install::controller
```

#### Parameters

The following parameters are available in the `kubeinstall::install::controller` class.

##### `web_ui_dashboard`

Data type: `Boolean`



Default value: `$kubeinstall::web_ui_dashboard`

### `kubeinstall::install::dashboard`

Install Kubernetes dashboard

#### Examples

##### 

```puppet
include kubeinstall::install::dashboard
```

#### Parameters

The following parameters are available in the `kubeinstall::install::dashboard` class.

##### `dashboard_configuration`

Data type: `Variant[
    Stdlib::HTTPUrl,
    Stdlib::Unixpath
  ]`



Default value: `$kubeinstall::dashboard_configuration`

##### `node_name`

Data type: `Stdlib::Fqdn`



Default value: `$kubeinstall::node_name`

### `kubeinstall::install::helm`

Helm client installation

#### Examples

##### 

```puppet
include kubeinstall::install::helm
```

#### Parameters

The following parameters are available in the `kubeinstall::install::helm` class.

##### `version`

Data type: `String`



Default value: `$kubeinstall::helm_version`

##### `archive`

Data type: `String`



Default value: `"helm-${version}-linux-amd64.tar.gz"`

##### `source`

Data type: `Stdlib::HTTPUrl`



Default value: `"https://get.helm.sh/helm-${version}-linux-amd64.tar.gz"`

### `kubeinstall::install::node`

A description of what this class does

#### Examples

##### 

```puppet
include kubeinstall::install::node
```

### `kubeinstall::install::worker`

Kubernetes installation on worker node

#### Examples

##### 

```puppet
include kubeinstall::install::worker
```

### `kubeinstall::kubeadm::config`

A description of what this class does

#### Examples

##### 

```puppet
include kubeinstall::kubeadm::config
```

#### Parameters

The following parameters are available in the `kubeinstall::kubeadm::config` class.

##### `cri_socket`

Data type: `Stdlib::Unixpath`

CRISocket is used to retrieve container runtime info. This information will
be annotated to the Node API object, for later re-use

Default value: `$kubeinstall::cri_socket`

##### `bootstrap_token`

Data type: `Optional[Kubeinstall::Token]`



Default value: ``undef``

##### `token_ttl`

Data type: `String[2]`



Default value: `'24h0m0s'`

##### `apiserver_advertise_address`

Data type: `Kubeinstall::Address`



Default value: `$kubeinstall::apiserver_advertise_address`

##### `apiserver_bind_port`

Data type: `Integer`



Default value: `$kubeinstall::apiserver_bind_port`

##### `node_name`

Data type: `Stdlib::Fqdn`



Default value: `$kubeinstall::node_name`

##### `cluster_name`

Data type: `String`



Default value: `$kubeinstall::cluster_name`

##### `kubernetes_version`

Data type: `Kubeinstall::Version`



Default value: `$kubeinstall::kubernetes_version`

##### `service_dns_domain`

Data type: `Stdlib::Fqdn`



Default value: `$kubeinstall::service_dns_domain`

##### `service_cidr`

Data type: `Stdlib::IP::Address`



Default value: `$kubeinstall::service_cidr`

##### `control_plane_endpoint`

Data type: `Optional[Kubeinstall::Address]`



Default value: `$kubeinstall::control_plane_endpoint`

### `kubeinstall::kubeadm::init_command`

A description of what this class does

#### Examples

##### 

```puppet
include kubeinstall::kubeadm::init_command
```

#### Parameters

The following parameters are available in the `kubeinstall::kubeadm::init_command` class.

##### `node_name`

Data type: `Stdlib::Fqdn`



Default value: `$kubeinstall::node_name`

### `kubeinstall::kubeadm::join_command`

Kubernetes kubeadm join command

#### Examples

##### 

```puppet
include kubeinstall::kubeadm::join_command
```

#### Parameters

The following parameters are available in the `kubeinstall::kubeadm::join_command` class.

##### `join_token`

Data type: `Optional[Kubeinstall::Token]`

Use this token for both discovery-token and tls-bootstrap-token in
`kubeadm join` command

Default value: `$kubeinstall::join_token`

##### `join_ca_cert_hash`

Data type: `Optional[Kubeinstall::CACertHash]`

For token-based discovery, validate that the root CA public key matches this
hash. The root CA found during discovery must match this value

Default value: `$kubeinstall::join_ca_cert_hash`

##### `join_apiserver_address`

Data type: `Optional[Kubeinstall::Address]`

API server andpoint address

Default value: `$kubeinstall::join_apiserver_address`

##### `join_apiserver_port`

Data type: `Integer`



Default value: `$kubeinstall::join_apiserver_port`

##### `control_plane`

Data type: `Boolean`



Default value: `$kubeinstall::join_control_plane`

### `kubeinstall::kubeadm::join_config`

Kubernetes kubeadm join command configuration

#### Examples

##### 

```puppet
include kubeinstall::kubeadm::join_config
```

#### Parameters

The following parameters are available in the `kubeinstall::kubeadm::join_config` class.

##### `apiserver_advertise_address`

Data type: `Kubeinstall::Address`

If the node should host a new control plane instance, the IP address the
API Server will advertise it's listening on

Default value: `$kubeinstall::apiserver_advertise_address`

##### `apiserver_bind_port`

Data type: `Integer`

If the node should host a new control plane instance, the port for the API
Server to bind to.

Default value: `$kubeinstall::apiserver_bind_port`

##### `control_plane`

Data type: `Boolean`

Whether to create a new control plane instance on this node

Default value: `$kubeinstall::join_control_plane`

##### `token`

Data type: `Kubeinstall::Token`



##### `ca_cert_hash`

Data type: `Kubeinstall::CACertHash`



##### `apiserver_address`

Data type: `Kubeinstall::Address`



##### `apiserver_port`

Data type: `Integer`



Default value: `$kubeinstall::join_apiserver_port`

##### `cri_socket`

Data type: `Stdlib::Unixpath`



Default value: `$kubeinstall::cri_socket`

##### `node_name`

Data type: `Stdlib::Fqdn`



Default value: `$kubeinstall::node_name`

### `kubeinstall::params`

A description of what this class does

#### Examples

##### 

```puppet
include kubeinstall::params
```

### `kubeinstall::profile::controller`

Kubernetes conntroller setup

#### Examples

##### 

```puppet
include kubeinstall::profile::controller
```

#### Parameters

The following parameters are available in the `kubeinstall::profile::controller` class.

##### `helm_client`

Data type: `Boolean`

Whether to install Helm client binary or not

Default value: ``true``

### `kubeinstall::profile::kubernetes`

Base setup for any kubernetes node

#### Examples

##### 

```puppet
include kubeinstall::profile::kubernetes
```

### `kubeinstall::profile::worker`

A description of what this class does

#### Examples

##### 

```puppet
include kubeinstall::profile::worker
```

### `kubeinstall::repos`

A description of what this class does

#### Examples

##### 

```puppet
include kubeinstall::repos
```

### `kubeinstall::runtime::docker`

Use Docker as container runtime for Kubernetes
see https://kubernetes.io/docs/setup/production-environment/container-runtimes/#docker

#### Examples

##### 

```puppet
include kubeinstall::runtime::docker
```

#### Parameters

The following parameters are available in the `kubeinstall::runtime::docker` class.

##### `dockerd_version`

Data type: `String`



Default value: `$kubeinstall::dockerd_version`

##### `containerd_version`

Data type: `String`



Default value: `$kubeinstall::containerd_version`

##### `mtu`

Data type: `Optional[Integer]`



Default value: `$kubeinstall::docker_mtu`

### `kubeinstall::service`

A description of what this class does

#### Examples

##### 

```puppet
include kubeinstall::service
```

### `kubeinstall::system`

A description of what this class does

#### Examples

##### 

```puppet
include kubeinstall::system
```

#### Parameters

The following parameters are available in the `kubeinstall::system` class.

##### `disable_swap`

Data type: `Boolean`



Default value: `$kubeinstall::disable_swap`

##### `disable_firewall`

Data type: `Boolean`



Default value: `$kubeinstall::disable_firewall`

##### `disable_selinux`

Data type: `Boolean`



Default value: `$kubeinstall::disable_selinux`

### `kubeinstall::system::bridged_traffic`

Load netfilter bridge kernel module

#### Examples

##### 

```puppet
include kubeinstall::system::bridged_traffic
```

#### Parameters

The following parameters are available in the `kubeinstall::system::bridged_traffic` class.

##### `manage_kernel_modules`

Data type: `Boolean`



Default value: `$kubeinstall::manage_kernel_modules`

### `kubeinstall::system::firewall::noop`

Disable firewalld service

#### Examples

##### 

```puppet
include kubeinstall::system::firewall::noop
```

### `kubeinstall::system::selinux::noop`

Set selinux in permissive mode

#### Examples

##### 

```puppet
include kubeinstall::system::selinux::noop
```

### `kubeinstall::system::swap`

Disable swap on the system

#### Examples

##### 

```puppet
include kubeinstall::system::swap
```

### `kubeinstall::system::sysctl::net_bridge`

Setup bridged traffic processing with iptables

#### Examples

##### 

```puppet
include kubeinstall::system::sysctl::net_bridge
```

#### Parameters

The following parameters are available in the `kubeinstall::system::sysctl::net_bridge` class.

##### `manage_sysctl_settings`

Data type: `Boolean`



Default value: `$kubeinstall::manage_sysctl_settings`

## Defined types

### `kubeinstall::token_discovery`

Resource to export into PuppetDB for distributing
k8s join credentials among cluster nodes

#### Examples

##### 

```puppet
kubeinstall::token_discovery { 'o9o8vw.fe02deotcm0dv8z5': }
```

#### Parameters

The following parameters are available in the `kubeinstall::token_discovery` defined type.

##### `ca_cert_hash`

Data type: `Kubeinstall::CACertHash`



##### `token`

Data type: `Kubeinstall::Token`



Default value: `$name`

##### `apiserver_address`

Data type: `Kubeinstall::Address`



Default value: `$kubeinstall::apiserver_advertise_address`

##### `apiserver_port`

Data type: `Integer`



Default value: `$kubeinstall::apiserver_bind_port`

##### `cluster_name`

Data type: `String`



Default value: `$kubeinstall::cluster_name`

## Resource types

### `kubeadm_token`

Bootstrap tokens are a simple bearer token that is meant to be used when creating new clusters or joining new nodes to an existing cluster

#### Properties

The following properties are available in the `kubeadm_token` type.

##### `auth_extra_groups`

Valid values: `%r{^system:bootstrappers:[a-z0-9:-]{0,255}[a-z0-9]$}`

Extra groups to authenticate the token as

##### `description`

Human readable description

##### `ensure`

Valid values: `present`, `absent`

Create or remove token.

Default value: `present`

##### `id`

Valid values: `%r{^[a-z0-9]{6}$}`

Token ID

##### `secret`

Valid values: `%r{^[a-z0-9]{6}$}`

Token Secret

##### `ttl`

Valid values: `%r{^([0-9]+h)?([1-5]?[0-9]m)?([1-5]?[0-9]s)?$}`, `0`, `0`

Controls the expiry of the token

Default value: `24h0m0s`

#### Parameters

The following parameters are available in the `kubeadm_token` type.

##### `bootstrap_authentication`

Valid values: ``true``, ``false``, `yes`, `no`

Indicates that the token can be used to authenticate to the API server as a bearer token

Default value: ``true``

##### `bootstrap_signing`

Valid values: ``true``, ``false``, `yes`, `no`

Indicates that the token may be used to sign the cluster-info ConfigMap

Default value: ``true``

##### `name`

Valid values: `%r{^(bootstrap-token-)?[a-z0-9]{6}$}`, `default`

namevar

Token Name

##### `provider`

The specific backend to use for this `kubeadm_token` resource. You will seldom need to specify this --- Puppet will
usually discover the appropriate provider for your platform.

## Functions

### `kubeinstall::discovery_hosts`

Type: Ruby 4.x API

The kubeinstall::discovery_hosts function.

#### `kubeinstall::discovery_hosts(String $lookup_type, Optional[Array] $equery)`

The kubeinstall::discovery_hosts function.

Returns: `Any`

##### `lookup_type`

Data type: `String`



##### `equery`

Data type: `Optional[Array]`



#### `kubeinstall::discovery_hosts(String $lookup_type, String $lookup_param, Optional[Array] $equery)`

The kubeinstall::discovery_hosts function.

Returns: `Any`

##### `lookup_type`

Data type: `String`



##### `lookup_param`

Data type: `String`



##### `equery`

Data type: `Optional[Array]`



#### `kubeinstall::discovery_hosts(String $lookup_type, Array[String] $lookup_param, Optional[Array] $equery)`

The kubeinstall::discovery_hosts function.

Returns: `Any`

##### `lookup_type`

Data type: `String`



##### `lookup_param`

Data type: `Array[String]`



##### `equery`

Data type: `Optional[Array]`



## Data types

### `Kubeinstall::Address`

The Kubeinstall::Address data type.

Alias of `Variant[Stdlib::Fqdn, Stdlib::IP::Address::Nosubnet]`

### `Kubeinstall::CACertHash`

The Kubeinstall::CACertHash data type.

Alias of `Pattern[/^sha256:[0-9a-f]{64}$/]`

### `Kubeinstall::Token`

The Kubeinstall::Token data type.

Alias of `Pattern[/^[a-z0-9]{6}.[a-z0-9]{16}$/]`

### `Kubeinstall::TokenTTL`

The Kubeinstall::TokenTTL data type.

Alias of `Pattern[/^([0-9]+h)?([0-5]?[0-9]m)?([0-5]?[0-9]s)?$/]`

### `Kubeinstall::Version`

https://kubernetes.io/docs/setup/release/version-skew-policy/

Alias of `Pattern[/^1\.1[6-8]\.[0-9]+/]`

